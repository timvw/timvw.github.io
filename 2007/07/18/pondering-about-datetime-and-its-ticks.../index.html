<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Pondering about DateTime and it&#39;s Ticks... - Tim Van Wassenhove</title><meta name="viewport" content="width=device-width, initial-scale=1">
	
  <meta itemprop="name" content="Pondering about DateTime and it&#39;s Ticks...">
  <meta itemprop="description" content="Recently someone was able to convince me that there is no problem with using System.DateTime for the storage of localtimes (even if DST is in effect), because it works with Ticks and i bought into his base &#43; offset story…. The following table explains his reasoning
Utc &lt;th style=&#34;width: 33%&#34;&gt; Localtime &lt;/th&gt; &lt;th style=&#34;width: 33%&#34;&gt; Ticks (Localtime) &lt;/th&gt; 2007-10-27 23:59:59 &lt;td&gt; 2007-10-28 01:59:59 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;599&lt;/b&gt;0000000 &lt;/td&gt; &#43;1 second &lt;td&gt; 2007-10-28 02:00:00 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;600&lt;/b&gt;0000000 &lt;/td&gt; &#43;2 seconds &lt;td&gt; 2007-10-28 02:00:01 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;601&lt;/b&gt;0000000 &lt;/td&gt; &#43;60 minutes &lt;td&gt; 2007-10-28 02:59:59 &lt;/td&gt; &lt;td&gt; 63329137&lt;b&gt;199&lt;/b&gt;0000000 &lt;/td&gt; &#43;60 minutes and 1 second &lt;td&gt; 2007-10-28 02:00:00 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;200&lt;/b&gt;0000000 &lt;/td&gt; &#43;60 minutes and 2 seconds &lt;td&gt; 2007-10-28 02:00:01 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;201&lt;/b&gt;0000000 &lt;/td&gt; This reasoning gives you the impression that for each second 10000000 is added to the ticks.. However, this is faulty and in reality you get the following">
  <meta itemprop="datePublished" content="2007-07-18T00:00:00+00:00">
  <meta itemprop="dateModified" content="2021-01-04T22:47:36+01:00">
  <meta itemprop="wordCount" content="409">
  <meta itemprop="keywords" content="CSharp"><meta property="og:url" content="https://timvw.be/2007/07/18/pondering-about-datetime-and-its-ticks.../">
  <meta property="og:site_name" content="Tim Van Wassenhove">
  <meta property="og:title" content="Pondering about DateTime and it&#39;s Ticks...">
  <meta property="og:description" content="Recently someone was able to convince me that there is no problem with using System.DateTime for the storage of localtimes (even if DST is in effect), because it works with Ticks and i bought into his base &#43; offset story…. The following table explains his reasoning
Utc &lt;th style=&#34;width: 33%&#34;&gt; Localtime &lt;/th&gt; &lt;th style=&#34;width: 33%&#34;&gt; Ticks (Localtime) &lt;/th&gt; 2007-10-27 23:59:59 &lt;td&gt; 2007-10-28 01:59:59 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;599&lt;/b&gt;0000000 &lt;/td&gt; &#43;1 second &lt;td&gt; 2007-10-28 02:00:00 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;600&lt;/b&gt;0000000 &lt;/td&gt; &#43;2 seconds &lt;td&gt; 2007-10-28 02:00:01 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;601&lt;/b&gt;0000000 &lt;/td&gt; &#43;60 minutes &lt;td&gt; 2007-10-28 02:59:59 &lt;/td&gt; &lt;td&gt; 63329137&lt;b&gt;199&lt;/b&gt;0000000 &lt;/td&gt; &#43;60 minutes and 1 second &lt;td&gt; 2007-10-28 02:00:00 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;200&lt;/b&gt;0000000 &lt;/td&gt; &#43;60 minutes and 2 seconds &lt;td&gt; 2007-10-28 02:00:01 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;201&lt;/b&gt;0000000 &lt;/td&gt; This reasoning gives you the impression that for each second 10000000 is added to the ticks.. However, this is faulty and in reality you get the following">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2007-07-18T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-01-04T22:47:36+01:00">
    <meta property="article:tag" content="CSharp">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Pondering about DateTime and it&#39;s Ticks...">
  <meta name="twitter:description" content="Recently someone was able to convince me that there is no problem with using System.DateTime for the storage of localtimes (even if DST is in effect), because it works with Ticks and i bought into his base &#43; offset story…. The following table explains his reasoning
Utc &lt;th style=&#34;width: 33%&#34;&gt; Localtime &lt;/th&gt; &lt;th style=&#34;width: 33%&#34;&gt; Ticks (Localtime) &lt;/th&gt; 2007-10-27 23:59:59 &lt;td&gt; 2007-10-28 01:59:59 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;599&lt;/b&gt;0000000 &lt;/td&gt; &#43;1 second &lt;td&gt; 2007-10-28 02:00:00 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;600&lt;/b&gt;0000000 &lt;/td&gt; &#43;2 seconds &lt;td&gt; 2007-10-28 02:00:01 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;601&lt;/b&gt;0000000 &lt;/td&gt; &#43;60 minutes &lt;td&gt; 2007-10-28 02:59:59 &lt;/td&gt; &lt;td&gt; 63329137&lt;b&gt;199&lt;/b&gt;0000000 &lt;/td&gt; &#43;60 minutes and 1 second &lt;td&gt; 2007-10-28 02:00:00 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;200&lt;/b&gt;0000000 &lt;/td&gt; &#43;60 minutes and 2 seconds &lt;td&gt; 2007-10-28 02:00:01 &lt;/td&gt; &lt;td&gt; 63329133&lt;b&gt;201&lt;/b&gt;0000000 &lt;/td&gt; This reasoning gives you the impression that for each second 10000000 is added to the ticks.. However, this is faulty and in reality you get the following">
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://timvw.be/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://timvw.be/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://timvw.be/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://timvw.be/js/main.js"></script>
	<link href="https://github.com/timvw" rel="me">
    <link href="https://timvw.be/" rel="me">
    <link href="https://fosstodon.org/@timvw" rel="me">
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="https://timvw.be/">Tim Van Wassenhove</a></h1>
	<div class="site-description"><p>Passionate geek, interested in Technology. Proud father of two</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/timvw" title="Github"><i data-feather="github"></i></a></li><li><a href="https://www.linkedin.com/in/timvanwassenhove" title="Linkedin"><i data-feather="linkedin"></i></a></li><li><a href="https://timvw.be/feed.xml" title="RSS"><i data-feather="rss"></i></a></li><li><a rel="me" href="https://fosstodon.org/@timvw" class="masto-link" ></a></li>
			</ul>
		
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="../../../../">Home</a>
			</li>
			
			<li>
				<a href="../../../../posts">All posts</a>
			</li>
			
			<li>
				<a href="../../../../tags">Tags</a>
			</li>
			
			<li>
				<a href="../../../../about/">About Me</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">18</span>
							<span class="rest">Jul 2007</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Pondering about DateTime and it&#39;s Ticks...</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Recently someone was able to convince me that there is no problem with using <a href="http://msdn2.microsoft.com/en-us/library/System.Datetime.aspx">System.DateTime</a> for the storage of localtimes (even if DST is in effect), because it works with <a href="http://msdn2.microsoft.com/en-us/library/system.datetime.ticks.aspx">Ticks</a> and i bought into his base + offset story&hellip;. The following table explains his reasoning</p>
<table width="100%">
  <tr>
    <th style="width: 33%">
      Utc
    </th>
<pre><code>&lt;th style=&quot;width: 33%&quot;&gt;
  Localtime
&lt;/th&gt;

&lt;th style=&quot;width: 33%&quot;&gt;
  Ticks (Localtime)
&lt;/th&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      2007-10-27 23:59:59
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 01:59:59
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;b&gt;599&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr style="background-color: orange">
    <td>
      +1 second
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:00:00
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;b&gt;600&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      +2 seconds
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:00:01
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;b&gt;601&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      +60 minutes
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:59:59
&lt;/td&gt;

&lt;td&gt;
  63329137&lt;b&gt;199&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      +60 minutes and 1 second
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:00:00
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;b&gt;200&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      +60 minutes and 2 seconds
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:00:01
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;b&gt;201&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
</table>
<p>This reasoning gives you the impression that for each second <strong>1</strong>0000000 is added to the ticks.. However, this is faulty and in reality you get the following</p>
<table width="100%">
  <tr>
    <th style="width: 33%">
      Utc
    </th>
<pre><code>&lt;th style=&quot;width: 33%&quot;&gt;
  Localtime
&lt;/th&gt;

&lt;th style=&quot;width: 33%&quot;&gt;
  Ticks (Localtime)
&lt;/th&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      2007-10-27 23:59:59
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 01:59:59
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;b&gt;599&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr style="background-color: orange">
    <td>
      +1 second
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:00:00
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;b&gt;600&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      +2 seconds
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:00:01
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;b&gt;601&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      +60 minutes
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:59:59
&lt;/td&gt;

&lt;td&gt;
  63329137&lt;b&gt;199&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr style="background-color: orange">
    <td>
      +60 minutes and 1 second
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:00:00
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;span style=&quot;color: red&quot;&gt;&lt;b&gt;600&lt;/b&gt;&lt;/span&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
  <tr>
    <td>
      +60 minutes and 2 seconds
    </td>
<pre><code>&lt;td&gt;
  2007-10-28 02:00:01
&lt;/td&gt;

&lt;td&gt;
  63329133&lt;b&gt;601&lt;/b&gt;0000000
&lt;/td&gt;
</code></pre>
  </tr>
</table>
<p>As you can see, instead of adding <strong>1</strong>0000000 to the ticks between 2007-10-27 00:59:59 and 01:00:00 in UTC there is a <span style="color:red">reduction of ticks in the localtime</span> instead&hellip;. Because of this new DateTime(633291336000000000, DateTimeKind.Local) could represent both 2007-10-27 00:00:00 UTC and 2007-10-27 01:00:00 UTC&hellip; So if you want to keep out of trouble you&rsquo;d better start storing your dates as UTC&hellip; If you don&rsquo;t believe me, run the test yourself</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>List<span style="color:#1f2328">&lt;</span>dateTime<span style="color:#1f2328">&gt;</span> localTimes <span style="color:#1f2328">=</span> <span style="color:#cf222e">new</span> List<span style="color:#1f2328">&lt;</span>dateTime<span style="color:#1f2328">&gt;();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">// start at 2007-10-27 23:59:59 UTC, which is 2007-28-10 01:59:59 localtime</span>
</span></span><span style="display:flex;"><span>DateTime utcBase <span style="color:#1f2328">=</span> <span style="color:#cf222e">new</span> DateTime<span style="color:#1f2328">(</span><span style="color:#0550ae">2007</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">10</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">27</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">23</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">59</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">59</span><span style="color:#1f2328">,</span> DateTimeKind<span style="color:#1f2328">.</span>Utc<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>localTimes<span style="color:#1f2328">.</span>Add<span style="color:#1f2328">(</span>utcBase<span style="color:#1f2328">.</span>ToLocalTime<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">// add 1 second to the base, which is 2007-28-10 02:00:00 localtime (first time)</span>
</span></span><span style="display:flex;"><span>localTimes<span style="color:#1f2328">.</span>Add<span style="color:#1f2328">(</span>utcBase<span style="color:#1f2328">.</span>AddSeconds<span style="color:#1f2328">(</span><span style="color:#0550ae">1</span><span style="color:#1f2328">).</span>ToLocalTime<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">// add 2 seconds to the base, which is 2007-28-10 02:00:01 localtime (first time)</span>
</span></span><span style="display:flex;"><span>localTimes<span style="color:#1f2328">.</span>Add<span style="color:#1f2328">(</span>utcBase<span style="color:#1f2328">.</span>AddSeconds<span style="color:#1f2328">(</span><span style="color:#0550ae">2</span><span style="color:#1f2328">).</span>ToLocalTime<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">// add 60 minutes to the base, which is 2007-28-10 02:59:59 localtime (first time)</span>
</span></span><span style="display:flex;"><span>localTimes<span style="color:#1f2328">.</span>Add<span style="color:#1f2328">(</span>utcBase<span style="color:#1f2328">.</span>AddMinutes<span style="color:#1f2328">(</span><span style="color:#0550ae">60</span><span style="color:#1f2328">).</span>ToLocalTime<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">// add 60 minutes and 1 second to the base, which is 2007-28-10 02:00:00 localtime (second time)</span>
</span></span><span style="display:flex;"><span>localTimes<span style="color:#1f2328">.</span>Add<span style="color:#1f2328">(</span>utcBase<span style="color:#1f2328">.</span>AddMinutes<span style="color:#1f2328">(</span><span style="color:#0550ae">60</span><span style="color:#1f2328">).</span>AddSeconds<span style="color:#1f2328">(</span><span style="color:#0550ae">1</span><span style="color:#1f2328">).</span>ToLocalTime<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">// add 60 minutes and 2 second to the base, which is 2007-28-10 02:00:01 localtime (second time)</span>
</span></span><span style="display:flex;"><span>localTimes<span style="color:#1f2328">.</span>Add<span style="color:#1f2328">(</span>utcBase<span style="color:#1f2328">.</span>AddMinutes<span style="color:#1f2328">(</span><span style="color:#0550ae">60</span><span style="color:#1f2328">).</span>AddSeconds<span style="color:#1f2328">(</span><span style="color:#0550ae">2</span><span style="color:#1f2328">).</span>ToLocalTime<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">foreach</span> <span style="color:#1f2328">(</span>DateTime localTime <span style="color:#cf222e">in</span> localTimes<span style="color:#1f2328">)</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>	Console<span style="color:#1f2328">.</span>WriteLine<span style="color:#1f2328">(</span>localTime<span style="color:#1f2328">.</span>ToString<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span style="color:#1f2328">));</span>
</span></span><span style="display:flex;"><span>	Console<span style="color:#1f2328">.</span>WriteLine<span style="color:#1f2328">(</span>localTime<span style="color:#1f2328">.</span>Ticks<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>	Console<span style="color:#1f2328">.</span>WriteLine<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span>
</span></span></code></pre></div>
			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="../../../../tags/csharp">CSharp</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2025  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-9DP4SV12YW"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-9DP4SV12YW');
        }
      </script><script>feather.replace()</script>
</body>
</html>
