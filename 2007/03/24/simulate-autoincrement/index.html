<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Simulate AutoIncrement - Tim Van Wassenhove</title><meta name="viewport" content="width=device-width, initial-scale=1">
	
  <meta itemprop="name" content="Simulate AutoIncrement">
  <meta itemprop="description" content="Earlier today someone asked the following
I&#39;m trying to move selected data from one table to another. The following works apart from the destination table is not incrementing the ID (I&#39;m not using auto increment for that field).
How can I increase the value of field_1_id for each select &gt; insert? I&#39;m guessing SQL doesn&#39;t loop through each SELECT match an insert correspondingly? Here is a possible answer: (Don’t forget to wrap these queries in a transaction if your MySQL Engine supports it)">
  <meta itemprop="datePublished" content="2007-03-24T00:00:00+00:00">
  <meta itemprop="dateModified" content="2021-01-04T22:47:36+01:00">
  <meta itemprop="wordCount" content="145">
  <meta itemprop="keywords" content="SQL"><meta property="og:url" content="https://timvw.be/2007/03/24/simulate-autoincrement/">
  <meta property="og:site_name" content="Tim Van Wassenhove">
  <meta property="og:title" content="Simulate AutoIncrement">
  <meta property="og:description" content="Earlier today someone asked the following
I&#39;m trying to move selected data from one table to another. The following works apart from the destination table is not incrementing the ID (I&#39;m not using auto increment for that field).
How can I increase the value of field_1_id for each select &gt; insert? I&#39;m guessing SQL doesn&#39;t loop through each SELECT match an insert correspondingly? Here is a possible answer: (Don’t forget to wrap these queries in a transaction if your MySQL Engine supports it)">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2007-03-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-01-04T22:47:36+01:00">
    <meta property="article:tag" content="SQL">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Simulate AutoIncrement">
  <meta name="twitter:description" content="Earlier today someone asked the following
I&#39;m trying to move selected data from one table to another. The following works apart from the destination table is not incrementing the ID (I&#39;m not using auto increment for that field).
How can I increase the value of field_1_id for each select &gt; insert? I&#39;m guessing SQL doesn&#39;t loop through each SELECT match an insert correspondingly? Here is a possible answer: (Don’t forget to wrap these queries in a transaction if your MySQL Engine supports it)">
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://timvw.be/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://timvw.be/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://timvw.be/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://timvw.be/js/main.js"></script>
	<link href="https://github.com/timvw" rel="me">
    <link href="https://timvw.be/" rel="me">
    <link href="https://fosstodon.org/@timvw" rel="me">
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="https://timvw.be/">Tim Van Wassenhove</a></h1>
	<div class="site-description"><p>Passionate geek, interested in Technology. Proud father of two</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/timvw" title="Github"><i data-feather="github"></i></a></li><li><a href="https://www.linkedin.com/in/timvanwassenhove" title="Linkedin"><i data-feather="linkedin"></i></a></li><li><a href="https://timvw.be/feed.xml" title="RSS"><i data-feather="rss"></i></a></li><li><a rel="me" href="https://fosstodon.org/@timvw" class="masto-link" ></a></li>
			</ul>
		
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="../../../../">Home</a>
			</li>
			
			<li>
				<a href="../../../../posts">All posts</a>
			</li>
			
			<li>
				<a href="../../../../tags">Tags</a>
			</li>
			
			<li>
				<a href="../../../../contact/">Contact</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">24</span>
							<span class="rest">Mar 2007</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Simulate AutoIncrement</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Earlier today someone asked the following</p>
<blockquote>
<div>
  I'm trying to move selected data from one table to another. The following works apart from the destination table is not incrementing the ID (I'm not using auto increment for that field).<br /> <br /> How can I increase the value of field_1_id for each select > insert? I'm guessing SQL doesn't loop through each SELECT match an insert correspondingly?
</div></blockquote>
<p>Here is a possible answer: (Don&rsquo;t forget to wrap these queries in a transaction if your MySQL Engine supports it)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#57606a">-- Some demo tables (and data)
</span></span></span><span style="display:flex;"><span><span style="color:#57606a">-- CREATE TABLE table1 (id INT(10), name VARCHAR(20), PRIMARY KEY(id));
</span></span></span><span style="display:flex;"><span><span style="color:#57606a">-- CREATE TABLE table2 (id INT(10), name VARCHAR(20), PRIMARY KEY(id));
</span></span></span><span style="display:flex;"><span><span style="color:#57606a">-- INSERT INTO table1 VALUES (1, &#34;tim&#34;), (2, &#34;mike&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">SET</span><span style="color:#fff"> </span><span style="color:#0550ae">@</span>id<span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">SELECT</span><span style="color:#fff"> </span><span style="color:#cf222e">MAX</span><span style="color:#1f2328">(</span>id<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0550ae">1</span><span style="color:#fff"> </span><span style="color:#cf222e">FROM</span><span style="color:#fff"> </span>table2<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">INSERT</span><span style="color:#fff"> </span><span style="color:#cf222e">INTO</span><span style="color:#fff"> </span>table2<span style="color:#fff"> </span><span style="color:#cf222e">SELECT</span><span style="color:#fff"> </span><span style="color:#0550ae">@</span>id<span style="color:#fff"> </span><span style="color:#1f2328">:</span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0550ae">@</span>id<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0550ae">1</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>table1<span style="color:#1f2328">.</span>name<span style="color:#fff"> </span><span style="color:#cf222e">FROM</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">SELECT</span><span style="color:#fff"> </span><span style="color:#0550ae">@</span>id<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#cf222e">AS</span><span style="color:#fff"> </span>id<span style="color:#1f2328">,</span><span style="color:#fff"> </span>table1<span style="color:#fff"> </span><span style="color:#cf222e">AS</span><span style="color:#fff"> </span>table1<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span></code></pre></div>
			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="../../../../tags/sql">SQL</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2025  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-9DP4SV12YW"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-9DP4SV12YW');
        }
      </script><script>feather.replace()</script>
</body>
</html>
