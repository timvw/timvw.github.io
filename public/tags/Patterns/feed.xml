<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Patterns on Tim Van Wassenhove&#39;s blog</title>
    <link>/tags/Patterns/</link>
    <description>Recent content in Patterns on Tim Van Wassenhove&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 28 Jan 2010 00:00:00 +0000</lastBuildDate><atom:link href="/tags/Patterns/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Presenting ValueType&lt;T&gt;</title>
      <link>/post/2010-01-28-presenting-valuetypet/</link>
      <pubDate>Thu, 28 Jan 2010 00:00:00 +0000</pubDate>
      
      <guid>/post/2010-01-28-presenting-valuetypet/</guid>
      <description>
        
          &lt;p&gt;Here is a base class for some code that i have written once too many in my life: (In case you&amp;rsquo;re an early adaptor (.Net 4.0) you may want to use System.Tuple&lt;!-- raw HTML omitted --&gt; as base class)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ValueType&lt;/span&gt;&amp;lt;T&amp;gt; : IComparable, IComparable&amp;lt;valueType&amp;lt;T&amp;gt;&amp;gt;, IEquatable&amp;lt;valueType&amp;lt;T&amp;gt;&amp;gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;where&lt;/span&gt; T : IComparable&amp;lt;T&amp;gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;protected&lt;/span&gt; T Value { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }
	
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; ValueType(T &lt;span style=&#34;color:#66d9ef&#34;&gt;value&lt;/span&gt;)
	{
		Value = &lt;span style=&#34;color:#66d9ef&#34;&gt;value&lt;/span&gt;;
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;override&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; GetHashCode()
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Value.GetHashCode();
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;override&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; ToString()
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Value.ToString();
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;override&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; Equals(&lt;span style=&#34;color:#66d9ef&#34;&gt;object&lt;/span&gt; obj)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Equals(obj &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; ValueType&amp;lt;T&amp;gt;);
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; Equals(ValueType&amp;lt;T&amp;gt; other)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Compare(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;, other) == &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; CompareTo(&lt;span style=&#34;color:#66d9ef&#34;&gt;object&lt;/span&gt; obj)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; CompareTo(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;, obj &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; ValueType&amp;lt;T&amp;gt;);
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; CompareTo(ValueType&amp;lt;T&amp;gt; other)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Compare(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;, other);
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; Compare(ValueType&amp;lt;T&amp;gt; instance1, ValueType&amp;lt;T&amp;gt; instance2)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (ReferenceEquals(instance1, instance2)) &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (ReferenceEquals(instance1, &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;)) &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; -&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;
		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (ReferenceEquals(instance2, &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;)) &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;

		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (ReferenceEquals(instance1.Value, instance2.Value)) &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (ReferenceEquals(instance1.Value, &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;)) &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; -&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;
		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (ReferenceEquals(instance2.Value, &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;)) &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;

		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; instance1.Value.CompareTo(instance2.Value);
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt; ==(ValueType&amp;lt;T&amp;gt; instance1, ValueType&amp;lt;T&amp;gt; instance2)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Compare(instance1, instance2) == &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt; !=(ValueType&amp;lt;T&amp;gt; instance1, ValueType&amp;lt;T&amp;gt; instance2)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; !(instance1 == instance2);
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt; &amp;lt;(ValueType&amp;lt;T&amp;gt; instance1, ValueType&amp;lt;T&amp;gt; instance2)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Compare(instance1, instance2) &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; 
	} 
		&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;operator&lt;/span&gt; &amp;gt;(ValueType&amp;lt;T&amp;gt; instance1, ValueType&amp;lt;T&amp;gt; instance2)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Compare(instance1, instance2) &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
        
      </description>
    </item>
    
    <item>
      <title>Do we need an EventAggregator when we have an IOC container?</title>
      <link>/post/2010-01-27-do-we-need-an-eventaggregator-when-we-have-an-ioc-container/</link>
      <pubDate>Wed, 27 Jan 2010 00:00:00 +0000</pubDate>
      
      <guid>/post/2010-01-27-do-we-need-an-eventaggregator-when-we-have-an-ioc-container/</guid>
      <description>
        
          &lt;p&gt;An &lt;a href=&#34;http://msdn.microsoft.com/en-us/library/cc707867.aspx&#34;&gt;Event Aggregator&lt;/a&gt; is an example of a &lt;a href=&#34;http://www.eaipatterns.com/PublishSubscribeChannel.html&#34;&gt;Publish/Subscribe channel&lt;/a&gt;. A while ago i started wondering if we still need an Event Aggregator in our compisite applications if we have an IOC container that takes cares of dependency wiring. An IOC container can easily inject the Event/MessageHandler(s) in the Event/MessagePublisher(s)&amp;hellip; I&amp;rsquo;m still not sure about the answer (Yes/No).&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>Creating series of elements</title>
      <link>/post/2010-01-08-creating-series-of-elements/</link>
      <pubDate>Fri, 08 Jan 2010 00:00:00 +0000</pubDate>
      
      <guid>/post/2010-01-08-creating-series-of-elements/</guid>
      <description>
        
          &lt;p&gt;Lately i have done quite a bit of charting. Very often the X-axis is populated with a series of numbers or dates. This can be as simple as: (My very little DSL in &lt;a href=&#34;http://codebetter.com/blogs/jeremy.miller/archive/2010/01/06/writing-internal-dsl-s-in-msdn.aspx&#34;&gt;Jeremy D. Miller Style&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;[Test]&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; ShouldBeAbleToGetSeriesOfNumbers()
{
	&lt;span style=&#34;color:#75715e&#34;&gt;// Arrange
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; series = &lt;span style=&#34;color:#ae81ff&#34;&gt;3.&lt;/span&gt;To(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;);

	&lt;span style=&#34;color:#75715e&#34;&gt;// Act
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; elements = series.Elements;

	&lt;span style=&#34;color:#75715e&#34;&gt;// Assert
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; expected = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt;[] { &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt; };
	CollectionAssert.AreEqual(expected, elements);
}
&lt;span style=&#34;color:#a6e22e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;[Test]&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; ShouldBeAbleToGetSeriesOfDays()
{
	&lt;span style=&#34;color:#75715e&#34;&gt;// Arrange
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; now = DateTime.Now.Date;
	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; twoDaysLater = now.AddDays(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;);
	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; series = now.To(twoDaysLater);

	&lt;span style=&#34;color:#75715e&#34;&gt;// Act
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; elements = series.Elements;

	&lt;span style=&#34;color:#75715e&#34;&gt;// Assert
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; expectedDays = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt;[] { now, now.AddDays(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;), now.AddDays(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) };
	CollectionAssert.AreEqual(expectedDays, elements);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And here is the code that makes these tests pass&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Series&lt;/span&gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Series&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;&amp;gt; To(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; to)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Create(&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, to);
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Series&amp;lt;dateTime&amp;gt; To(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt; DateTime &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, DateTime to)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Create(&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, to);
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Series&amp;lt;dateTime&amp;gt; Create(DateTime &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, DateTime to)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Series&amp;lt;dateTime&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;.Date, to.Date, d =&amp;gt; d.AddDays(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;));
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Series&amp;lt;dateTime&amp;gt; Create(DateTime &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; numberOfDays)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Create(&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;.Date, &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;.Date.AddDays(numberOfDays));
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Series&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;&amp;gt; Create(&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; to)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Series&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, to, n =&amp;gt; n + &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;);
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; Series&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;&amp;gt; Create(&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; to, &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; stepSize)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Series&amp;lt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, to, n =&amp;gt; n + stepSize);
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Series&lt;/span&gt;&amp;lt;T&amp;gt; : IEnumerable&amp;lt;T&amp;gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;where&lt;/span&gt; T : IComparable
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; T From { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; T To { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; Func&amp;lt;t, T&amp;gt; Step { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; Series(T &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;, T to, Func&amp;lt;t, T&amp;gt; step)
	{
		From = &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;;
		To = to;
		Step = step;
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; IEnumerable&amp;lt;T&amp;gt; Elements
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;
		{
			&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; current = From;
			&lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (current.CompareTo(To) &amp;lt;= &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) 
			{ 
				&lt;span style=&#34;color:#66d9ef&#34;&gt;yield&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; current; current = Step(current); 
			} 
		} 
	} 
	
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; IEnumerator&amp;lt;T&amp;gt; GetEnumerator()
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; Elements.GetEnumerator();
	}

	IEnumerator IEnumerable.GetEnumerator()
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; GetEnumerator();
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
        
      </description>
    </item>
    
    <item>
      <title>In case you really have to Append one array to another</title>
      <link>/post/2009-12-04-in-case-you-really-have-to-append-one-array-to-another/</link>
      <pubDate>Fri, 04 Dec 2009 00:00:00 +0000</pubDate>
      
      <guid>/post/2009-12-04-in-case-you-really-have-to-append-one-array-to-another/</guid>
      <description>
        
          &lt;p&gt;Here is another problem i&amp;rsquo;ve seen people solve once too many: Append one array to another. STOP. Revisit the problem. Can&amp;rsquo;t you simply use List&lt;!-- raw HTML omitted --&gt; and move on to solving actual business problems? In case you really can&amp;rsquo;t get rid of the arrays read the following&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;Given()
{
	source = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt;[] { SourceElement };
	destination = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt;[] { DestinationElement };
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;and&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;When()
{
	source.AppendTo(&lt;span style=&#34;color:#66d9ef&#34;&gt;ref&lt;/span&gt; destination);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;and&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;ThenTheDestinationShouldStillHaveTheDestinationElement()
{
	Assert.AreEqual(DestinationElement, destination[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;and&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;ThenTheDestinationShouldHaveBeenExtendedWithTheSourceElement()
{
	Assert.AreEqual(SourceElement, destination[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And here is the code which satisfies the requirements&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Extensions&lt;/span&gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; AppendTo&amp;lt;t&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt; T[] sourceArray, &lt;span style=&#34;color:#66d9ef&#34;&gt;ref&lt;/span&gt; T[] destinationArray)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; sourceLength = sourceArray.Length;
		&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; destinationLength = destinationArray.Length;
		&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; extendedLength = destinationLength + sourceLength;
		Array.Resize(&lt;span style=&#34;color:#66d9ef&#34;&gt;ref&lt;/span&gt; destinationArray, extendedLength);
		Array.Copy(sourceArray, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, destinationArray, destinationLength, sourceLength);
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Perhaps it&amp;rsquo;s time to start (or does it exist already, cause i can&amp;rsquo;t find it) an open-source project with extension methods.&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>About databinding and composite views</title>
      <link>/post/2009-10-13-about-databinding-and-composite-views/</link>
      <pubDate>Tue, 13 Oct 2009 00:00:00 +0000</pubDate>
      
      <guid>/post/2009-10-13-about-databinding-and-composite-views/</guid>
      <description>
        
          &lt;p&gt;A couple of days ago i had a databound ItemsControl (collection of Model.Cell) which instantiated sub views (with their own viewmodel).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;grid&amp;gt;&lt;/span&gt;
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;grid.Resources&amp;gt;&lt;/span&gt;
		&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;dataTemplate&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;x:Key=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CellTemplate&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
			&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;views:CellView&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
		&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/dataTemplate&amp;gt;&lt;/span&gt;
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/grid.Resources&amp;gt;&lt;/span&gt;
	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;itemsControl&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ItemTemplate=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;{StaticResource CellTemplate}&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ItemsSource=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;{Binding Cells}&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/grid&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Because each CellViewModel needs to know which cell they manage i used the following dirty hack&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; CellView()
{
	Loaded += CellView_Loaded;
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; CellView_Loaded(&lt;span style=&#34;color:#66d9ef&#34;&gt;object&lt;/span&gt; sender, RoutedEventArgs e)
{
	DataContext = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; CellViewModel(DataContext);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Later on that day i realised there was a much cleaner solution: Let the BoardViewModel expose a collection of ViewModels.CellViewModel instead of Model.Cell. What a relief that i don&amp;rsquo;t have to use the Loaded event hack.&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>Exploring M-V-VM</title>
      <link>/post/2009-10-13-exploring-m-v-vm/</link>
      <pubDate>Tue, 13 Oct 2009 00:00:00 +0000</pubDate>
      
      <guid>/post/2009-10-13-exploring-m-v-vm/</guid>
      <description>
        
          &lt;p&gt;A couple of years ago a collegue recommended &lt;a href=&#34;http://www.amazon.com/Data-Binding-Windows-Forms-2-0/dp/032126892X&#34;&gt;Data Binding with Windows Forms 2.0: Programming Smart Client Data Applications with .NET&lt;/a&gt; and i noticed that my code started to gravitate towards an &lt;a href=&#34;http://en.wikipedia.org/wiki/Model_View_ViewModel&#34;&gt;Model-View-ViewModel&lt;/a&gt; architecture. Due to shortcomings and painful experiences i gave up on databinding and began to use &lt;a href=&#34;http://martinfowler.com/eaaDev/PassiveScreen.html&#34;&gt;Passieve View&lt;/a&gt; instead.&lt;/p&gt;
&lt;p&gt;Passive View doesn&amp;rsquo;t work (well) with smart views so i decided to give M-V-VM another because i really wanted to leverage WPF&amp;rsquo;s rich support for databinding.&lt;/p&gt;
&lt;p&gt;The key difference between M-V-VM and Passive View is, imho, the fact that the ViewModel is unaware of the View unlike Passive View where the Presenter knows about the (simple) View.&lt;/p&gt;
&lt;p&gt;When we test a Presenter i notice that we end up writing interaction based tests (assertions on a mocked view) and when we test a ViewModel we end up writing state-based tests instead.&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>Extension methods to improve readability</title>
      <link>/post/2009-08-28-extension-methods-to-improve-readability/</link>
      <pubDate>Fri, 28 Aug 2009 00:00:00 +0000</pubDate>
      
      <guid>/post/2009-08-28-extension-methods-to-improve-readability/</guid>
      <description>
        
          &lt;p&gt;A common reason to take advantage of extension methods is to enhance readability (think fluent interfaces). My team uses the &lt;a href=&#34;http://en.wikipedia.org/wiki/Specification_pattern&#34;&gt;specification pattern&lt;/a&gt; regularly and in case a requirement says something like &amp;ldquo;if the player has reached level 10 a message should be displayed&amp;rdquo; they would implement it as&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; HasReachedLevel(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;).IsSatisfiedBy(player))
{
	view.DisplayMessage(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Congratulations! You have reached level 10.&amp;#34;&lt;/span&gt;);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Pretty good but did you notice that they changed the order of player and level in their (code) story? With the aid of an extension method we can express this requirement as&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (player.Satisfies(&lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; HasReachedLevel(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)))
{
	view.DisplayMessage(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Congratulations! You have reached level 10.&amp;#34;&lt;/span&gt;);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here is the extension method that allows you to express the requirement in this way&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; Satisfies&amp;lt;t&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt; T candidate, ISpecification&amp;lt;t&amp;gt; specification)
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; specification.IsSatisfiedBy(candidate);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
        
      </description>
    </item>
    
    <item>
      <title>Experimenting with ControlStateMachine and Fluent interfaces</title>
      <link>/post/2009-08-13-experimenting-with-controlstatemachine-and-fluent-interfaces/</link>
      <pubDate>Thu, 13 Aug 2009 00:00:00 +0000</pubDate>
      
      <guid>/post/2009-08-13-experimenting-with-controlstatemachine-and-fluent-interfaces/</guid>
      <description>
        
          &lt;p&gt;A long time ago i read &lt;a href=&#34;http://codebetter.com/blogs/jeremy.miller/archive/2007/07/25/the-build-your-own-cab-series-table-of-contents.aspx&#34;&gt;Build your own CAB series&lt;/a&gt; and recently i noticed that there is a wiki: &lt;a href=&#34;http://www.jeremydmiller.com/ppatterns/Default.aspx?Page=MainPage&amp;amp;AspxAutoDetectCookieSupport=1&#34;&gt;Presentation Patterns Wiki!&lt;/a&gt; and it inspired me to experiment with state machines. Here are a couple of examples:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;controlStateMachine = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; ControlStateMachine&amp;lt;states&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;);

controlStateMachine.AfterEachStateChange()
.Do(MakeRelevantButtonsVisible);

controlStateMachine.WhenStateChangesTo(States.RetrievingSubscriptionPeriod)
.TheOnlyVisibleControlsAre(flowLayoutPanel1, datePicker1);

controlStateMachine.WhenStateChangesTo(States.RetrievingCustomerInformation)
.MakeVisible(customerInput1)
.Do(() =&amp;gt; customerInput1.Dock = DockStyle.Fill);

controlStateMachine.WhenStateChangesTo(States.Ready)
.MakeInvisible(customerInput1);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And here is another example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;wizardStateMachine = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; WizardStateMachine&amp;lt;states&amp;gt;(controlStateMachine);

wizardStateMachine.InState(States.RetrievingSubscriptionPeriod)
.OnCommand(WizardCommands.Next)
.TransitionTo(States.RetrievingCustomerInformation);

wizardStateMachine.InState(States.RetrievingCustomerInformation)
.OnCommand(WizardCommands.Back)
.TransitionTo(States.RetrievingSubscriptionPeriod)
.OnCommand(WizardCommands.Finish)
.TransitionTo(States.Ready);

wizardStateMachine.InState(States.Ready)
.OnCommand(WizardCommands.New)
.Do(() =&amp;gt; MessageBox.Show(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Currently not supported&amp;#34;&lt;/span&gt;));
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Stay tuned for future posts where i describe the problem space that have lead to this API.&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>Strict mocks lead to overspecification</title>
      <link>/post/2009-03-24-strict-mocks-lead-to-overspecification/</link>
      <pubDate>Tue, 24 Mar 2009 00:00:00 +0000</pubDate>
      
      <guid>/post/2009-03-24-strict-mocks-lead-to-overspecification/</guid>
      <description>
        
          &lt;p&gt;Here is an example that demonstrates how strick mocks lead to overspecification. Imagine that we are creating a simple screen in a &lt;a href=&#34;http://martinfowler.com/eaaDev/PassiveScreen.html&#34;&gt;Passive View&lt;/a&gt; architecture. The first feature that we implement is displaying the message &amp;ldquo;edit&amp;rdquo; when the user clicks the edit button&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;[Fact]&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; ShouldDisplayEditClickMessage()
{
	&lt;span style=&#34;color:#75715e&#34;&gt;// Establish context
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	MockRepository mockRepository = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; MockRepository();
	IView view = mockRepository.StrictMock&amp;lt;iview&amp;gt;();
	Expect.Call(&lt;span style=&#34;color:#66d9ef&#34;&gt;delegate&lt;/span&gt; { view.EditClick += &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;; }).IgnoreArguments();
	mockRepository.Replay(view);

	&lt;span style=&#34;color:#75715e&#34;&gt;// Create sut
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	Presenter sut = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Presenter(view);

	&lt;span style=&#34;color:#75715e&#34;&gt;// Setup expectations
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	mockRepository.BackToRecord(view, BackToRecordOptions.Expectations);
	Expect.Call(&lt;span style=&#34;color:#66d9ef&#34;&gt;delegate&lt;/span&gt; { view.DisplayClickMessage(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;edit&amp;#34;&lt;/span&gt;); });
	mockRepository.ReplayAll();

	&lt;span style=&#34;color:#75715e&#34;&gt;// Exercise
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	RhinoMocksExtensions
	.GetEventRaiser(view, &lt;span style=&#34;color:#66d9ef&#34;&gt;delegate&lt;/span&gt;(IView v) { v.EditClick += &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;; })
	.Raise(view, EventArgs.Empty);

	&lt;span style=&#34;color:#75715e&#34;&gt;// Verify
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	mockRepository.VerifyAll();
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://www.timvw.be/wp-content/images/overspecification-01.PNG&#34; alt=&#34;screenshot of test runner with all tests passing&#34;&gt;&lt;/p&gt;
&lt;p&gt;And now we add the feature that displays the message &amp;ldquo;save&amp;rdquo; whenever the user clicks on the save button&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;[Fact]&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; ShouldDisplaySaveClickMessage()
{
	&lt;span style=&#34;color:#75715e&#34;&gt;// Establish context
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	MockRepository mockRepository = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; MockRepository();
	IView view = mockRepository.StrictMock&amp;lt;iview&amp;gt;();
	Expect.Call(&lt;span style=&#34;color:#66d9ef&#34;&gt;delegate&lt;/span&gt; { view.EditClick += &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;; }).IgnoreArguments();
	Expect.Call(&lt;span style=&#34;color:#66d9ef&#34;&gt;delegate&lt;/span&gt; { view.SaveClick += &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;; }).IgnoreArguments();
	mockRepository.Replay(view);

	&lt;span style=&#34;color:#75715e&#34;&gt;// Create sut
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	Presenter sut = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Presenter(view);

	&lt;span style=&#34;color:#75715e&#34;&gt;// Setup expectations
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	mockRepository.BackToRecord(view, BackToRecordOptions.Expectations);
	Expect.Call(&lt;span style=&#34;color:#66d9ef&#34;&gt;delegate&lt;/span&gt; { view.DisplayClickMessage(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;save&amp;#34;&lt;/span&gt;); });
	mockRepository.ReplayAll();

	&lt;span style=&#34;color:#75715e&#34;&gt;// Exercise
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	RhinoMocksExtensions
	.GetEventRaiser(view, &lt;span style=&#34;color:#66d9ef&#34;&gt;delegate&lt;/span&gt;(IView v) { v.SaveClick += &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;; })
	.Raise(view, EventArgs.Empty);

	&lt;span style=&#34;color:#75715e&#34;&gt;// Verify
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	mockRepository.VerifyAll();
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;http://www.timvw.be/wp-content/images/overspecification-02.PNG&#34; alt=&#34;screenshot of test runner with a failing test.&#34;&gt;&lt;/p&gt;
&lt;p&gt;Although we implemented the feature correctly, and left the code of the first feature untouched, we notice that our ShouldDisplayEditClickMessage test fails because it is not expecting a subscription to the SaveClick event. Imho, this way of testing is a testing &lt;strong&gt;anti-pattern&lt;/strong&gt;.&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>Refactoring EffectivityManager</title>
      <link>/post/2008-09-23-refactoring-effectivitymanager/</link>
      <pubDate>Tue, 23 Sep 2008 00:00:00 +0000</pubDate>
      
      <guid>/post/2008-09-23-refactoring-effectivitymanager/</guid>
      <description>
        
          &lt;p&gt;A while ago i presented the &lt;a href=&#34;http://www.timvw.be/presenting-a-generic-effectivitymanager/&#34;&gt;EffectivityManager&lt;/a&gt;. Having used this class for a while i have decided to rename it to Temporal&lt;!-- raw HTML omitted --&gt;. The implementation of IList&lt;!-- raw HTML omitted --&gt; is not required anymore because a user is typically only interested in a specific effectivity, not the evolution of the effectivities.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; ITemporal&amp;lt;T&amp;gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; Modify(T element, DateTime &lt;span style=&#34;color:#66d9ef&#34;&gt;from&lt;/span&gt;);
	IEffectivity&amp;lt;T&amp;gt; GetSnapshot(DateTime validityDate);
	&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; TryGetSnapshot(DateTime validityDate, &lt;span style=&#34;color:#66d9ef&#34;&gt;out&lt;/span&gt; IEffectivity&amp;lt;T&amp;gt; effectivity);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In the implementation i have added a constructor that accepts a &lt;a href=&#34;http://www.timvw.be/presenting-a-generic-discreterange/&#34;&gt;DiscreteValuesGenerator&lt;!-- raw HTML omitted --&gt;&lt;/a&gt; which makes it possible to create Periods with a resolution of a day instead of seconds.&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>About the Specification pattern</title>
      <link>/post/2008-07-22-about-the-specification-pattern/</link>
      <pubDate>Tue, 22 Jul 2008 00:00:00 +0000</pubDate>
      
      <guid>/post/2008-07-22-about-the-specification-pattern/</guid>
      <description>
        
          &lt;p&gt;A couple of days ago i mentionned &lt;a href=&#34;http://www.goeleven.com&#34;&gt;Yves Goeleven&amp;rsquo;s blog&lt;/a&gt; as a reference for solutions using &lt;a href=&#34;http://en.wikipedia.org/wiki/Domain-driven_design&#34;&gt;DDD&lt;/a&gt; principles. Let&amp;rsquo;s have a look at his implementation of the AndSpecification and OrSpecification in &lt;a href=&#34;http://www.goeleven.com/blog/entryDetail.aspx?entry=57&#34;&gt;Design Patterns &amp;ndash; The Specification Pattern &amp;ndash; Part I&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AndSpecification&lt;/span&gt;&amp;lt;T&amp;gt; : CompositeSpecification&amp;lt;T&amp;gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;override&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; IsSatisfiedBy(T candidate)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; isSatisfied = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;;
		&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt;( ISpecification&amp;lt;T&amp;gt; spec &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; Specifications)
		{
			isSatisfied &amp;amp;= spec.IsSatisfiedBy(candidate);
		}
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; isSatisfied;
	}
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OrSpecification&lt;/span&gt;&amp;lt;T&amp;gt; : CompositeSpecification&amp;lt;T&amp;gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;override&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; IsSatisfiedBy(T obj)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; isSatisfied = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;;
		&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt;( ISpecification&amp;lt;T&amp;gt; spec &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; Specifications)
		{
			isSatisfied |= spec.IsSatisfiedBy(obj);
		}
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; isSatisfied;
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I believe that it would be better if the implementations had the same lazy evaluation behaviour as the C# &amp;amp;&amp;amp; and || operators. Eg: in C# one can write (a &amp;amp;&amp;amp; b) and if a evaluates to false, then b is not evaluated anymore. Consider the following code&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (person != &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; person.Age &amp;gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;18&lt;/span&gt;) { }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Let&amp;rsquo;s rewrite that same code using Specifications&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NotNullSpecification&lt;/span&gt;&amp;lt;T&amp;gt; : ISpecification&amp;lt;T&amp;gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;where&lt;/span&gt; T : &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; IsSatisfiedBy(T item)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; item != &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;;
	}
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OlderThanSpecification&lt;/span&gt; : ISpecification&amp;lt;person&amp;gt; {
	&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; age;

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; OlderThanSpecification(&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; age)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.age = age;
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; IsSatisfiedBy(Person person)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; person.Age &amp;gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.age;
	}
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PersonNotNullAndOlderThan18Specification&lt;/span&gt; : AndSpecification&amp;lt;person&amp;gt; 
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; PersonNotNullAndOlderThan18Specification()
	: &lt;span style=&#34;color:#66d9ef&#34;&gt;base&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; NotNullSpecification&amp;lt;person&amp;gt;(), &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; OlderThanSpecification(&lt;span style=&#34;color:#ae81ff&#34;&gt;18&lt;/span&gt;))
	{
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Using the mentionned AndSpecification implementation the following unittest will fail&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;[TestMethod]&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; TestPersonNotNullAndOlderThan18Specification()
{
	Person person = &lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;;

	ISpecification&amp;lt;person&amp;gt; specification = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; PersonNotNullAndOlderThan18Specifictation();
	Assert.IsFalse(specification.IsSatisfiedBy(person));
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In order to make that test pass we could rewrite the specifications as following&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;abstract&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CompositeSpecification&lt;/span&gt;&amp;lt;T&amp;gt; : ISpecification&amp;lt;T&amp;gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;readonly&lt;/span&gt; IEnumerable&amp;lt;ispecification&amp;lt;T&amp;gt;&amp;gt; specifications;

	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; CompositeSpecification(IEnumerable&amp;lt;ispecification&amp;lt;T&amp;gt;&amp;gt; specifications)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.specifications = specifications;
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;protected&lt;/span&gt; IEnumerable&amp;lt;ispecification&amp;lt;T&amp;gt;&amp;gt; Specifications
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.specifications; }
	}

	&lt;span style=&#34;color:#66d9ef&#34;&gt;abstract&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; IsSatisfiedBy(T item);
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AndSpecification&lt;/span&gt;&amp;lt;T&amp;gt; : CompositeSpecification&amp;lt;T&amp;gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; AndSpecification(IEnumerable&amp;lt;ispecification&amp;lt;T&amp;gt;&amp;gt; specifications)
	:&lt;span style=&#34;color:#66d9ef&#34;&gt;base&lt;/span&gt;(specifications)
	{ }

	&lt;span style=&#34;color:#66d9ef&#34;&gt;override&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; IsSatisfiedBy(T item)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; (ISpecification&amp;lt;T&amp;gt; specification &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.Specifications)
		{
			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (!specification.IsSatisfiedBy(item))
			{
			&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;;
			}
		}

		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;;
	}
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;OrSpecification&lt;/span&gt;&amp;lt;T&amp;gt; : CompositeSpecification&amp;lt;T&amp;gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; OrSpecification(IEnumerable&amp;lt;ispecification&amp;lt;T&amp;gt;&amp;gt; specifications)
	: &lt;span style=&#34;color:#66d9ef&#34;&gt;base&lt;/span&gt;(specifications)
	{ }

	&lt;span style=&#34;color:#66d9ef&#34;&gt;override&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; IsSatisfiedBy(T item)
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; (ISpecification&amp;lt;T&amp;gt; specification &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.Specifications)
		{
			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (specification.IsSatisfiedBy(item))
			{
				&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;;
			}
		}

		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;;
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
        
      </description>
    </item>
    
    <item>
      <title>Presenting a generic DiscreteValuesRange</title>
      <link>/post/2008-07-16-presenting-a-generic-discreterange/</link>
      <pubDate>Wed, 16 Jul 2008 00:00:00 +0000</pubDate>
      
      <guid>/post/2008-07-16-presenting-a-generic-discreterange/</guid>
      <description>
        
          &lt;p&gt;Let me start with a real world example demonstrating the usefulness of a generic DiscreteValuesRange. Imagine that i run a grid computing business and my clients want to book capacity on the grid for a given period. Before their booking is approved, i have to verify that the client has contracts that allow him to use the system for each day of the booking period. Usually, such a check is implemented as following&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; CheckEachDayIsCovered(Booking booking, Client client)
{
	DateRange periodToCheck = booking.Period;
	DateTime endOfTime = &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; DateTime(&lt;span style=&#34;color:#ae81ff&#34;&gt;9999&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;31&lt;/span&gt;);

	DateTime dayToCheck = periodToCheck.Begin;
	&lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (dayToCheck &amp;lt;= periodToCheck.End) 
	{ 
		&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; dayIsCovered = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;; 
		&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; (Contract contract &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; client.Contracts) 
		{ 
			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (contract.Period.Includes(dayToCheck)) 
			{ 
				dayIsCovered = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;; 
				&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (contract.Period.End &amp;lt; endOfTime) 
				{ 
					dayToCheck = contract.Period.End.AddDays(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;); 
				} 
				&lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; 
				{ 
					&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;; 
				} 
			} 
		} 
		&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (!dayIsCovered) 
		{ 
			&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;; 
		} 
	} 
	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;; 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After a while clients want to buy licenses for only a couple of hours instead of a full day. I realise that my check can remain the same, but that the concept &amp;ldquo;EndOfTime&amp;rdquo; has become DateTime(9999, 12, 31, 23, 59, 59) and that i can advance only an hour instead of a day. Since i want to reuse my code i define the IDiscreteValueProvider&lt;!-- raw HTML omitted --&gt; interface (See &lt;a href=&#34;http://en.wikipedia.org/wiki/Discrete_space&#34;&gt;Discrete Space&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; IDiscreteValuesProvider&amp;lt;T&amp;gt;
{
	T GetNextValue(T &lt;span style=&#34;color:#66d9ef&#34;&gt;value&lt;/span&gt;);
	T MaxValue { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After this i&amp;rsquo;m able to implement a DiscreteValuesRange&lt;!-- raw HTML omitted --&gt; that implements the following interface (See: &lt;a href=&#34;http://www.timvw.be/presenting-a-generic-range/&#34;&gt;Generic Range&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; IDiscreteValuesRange&amp;lt;T&amp;gt; : IRange&amp;lt;T&amp;gt;
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; IsCoveredByRanges(IEnumerable&amp;lt;idiscreteValuesRange&amp;lt;T&amp;gt;&amp;gt; ranges);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now, with all this infrastructure i can rewrite my original method as following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; CheckEachDayIsCovered(Booking booking, Client client)
{
	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; booking.Period.IsCoveredByRanges(client.GetContractPeriods());
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Client&lt;/span&gt;
{
	...
	IEnumerable&amp;lt;range&amp;lt;dateTime&amp;gt;&amp;gt; GetContractPeriods()
	{
		&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; (Contract contract &lt;span style=&#34;color:#66d9ef&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.Contracts)
		{
			&lt;span style=&#34;color:#66d9ef&#34;&gt;yield&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; contract.Period;
		}
	}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Feel free to download all this infrastructure: &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/DiscreteRange.zip&#34;&gt;DiscreteRange.zip&lt;/a&gt; and use it for your next coverage check.&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>Presenting a generic Effectivity</title>
      <link>/post/2008-05-19-presenting-a-generic-effectivity/</link>
      <pubDate>Mon, 19 May 2008 00:00:00 +0000</pubDate>
      
      <guid>/post/2008-05-19-presenting-a-generic-effectivity/</guid>
      <description>
        
          &lt;p&gt;Very often we have to manage objects and their changes over time. Usually we implement this by adding a &lt;a href=&#34;http://www.timvw.be/presenting-a-generic-range/&#34;&gt;Range&lt;!-- raw HTML omitted --&gt;&lt;/a&gt; to the data. &lt;a href=&#34;http://martinfowler.com/&#34;&gt;Martin Fowler&lt;/a&gt; has a name for this pattern: &lt;a href=&#34;http://martinfowler.com/ap2/effectivity.html&#34;&gt;Effectivity&lt;/a&gt; and i have an implementation for the following interface&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; IEffectivity&amp;lt;T&amp;gt; : IComparable&amp;lt;ieffectivity&amp;lt;T&amp;gt;&amp;gt;
{
	T Element { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; }
	IRange&amp;lt;dateTime&amp;gt; ValidityPeriod { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; }
	&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; IsEffectiveOn(DateTime validityDate);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Feel free to download &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/IEffectivity.txt&#34;&gt;IEffectivity.txt&lt;/a&gt;, &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/Effectivity.txt&#34;&gt;Effectivity.txt&lt;/a&gt; and &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/EffectivityTester.txt&#34;&gt;EffectivityTester.txt&lt;/a&gt;.&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>Presenting a generic EffectivityManager</title>
      <link>/post/2008-05-19-presenting-a-generic-effectivitymanager/</link>
      <pubDate>Mon, 19 May 2008 00:00:00 +0000</pubDate>
      
      <guid>/post/2008-05-19-presenting-a-generic-effectivitymanager/</guid>
      <description>
        
          &lt;p&gt;I&amp;rsquo;ve already presented a &lt;a href=&#34;http://www.timvw.be/presenting-a-generic-effectivity/&#34;&gt;Generic Effectivity&lt;/a&gt;. Offcourse, managing all these effectivities (versions of data) can be handled in a generic way too. A bit of experience mixed with &lt;a href=&#34;http://martinfowler.com/ap2/timeNarrative.html&#34;&gt;Patterns for things that change with time&lt;/a&gt; allowed me to come up with the following interface&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; IEffectivityManager&amp;lt;T&amp;gt; : IList&amp;lt;ieffectivity&amp;lt;T&amp;gt;&amp;gt;
{
	IEffectivity&amp;lt;T&amp;gt; Add(T t, DateTime begin);
	IEffectivity&amp;lt;T&amp;gt; GetSnapshot(DateTime validityDate);
	&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; TryGetSnapshot(DateTime validityDate, &lt;span style=&#34;color:#66d9ef&#34;&gt;out&lt;/span&gt; IEffectivity&amp;lt;T&amp;gt; effectivity);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Feel free to download &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/IEffectivityManager.txt&#34;&gt;IEffectivityManager.txt&lt;/a&gt;, &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/EffectivityManager.txt&#34;&gt;EffectivityManager.txt&lt;/a&gt; and &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/EffectivityManagerTester.txt&#34;&gt;EffectivityManagerTester.txt&lt;/a&gt;.&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>Presenting a generic Range</title>
      <link>/post/2008-05-17-presenting-a-generic-range/</link>
      <pubDate>Sat, 17 May 2008 00:00:00 +0000</pubDate>
      
      <guid>/post/2008-05-17-presenting-a-generic-range/</guid>
      <description>
        
          &lt;p&gt;Quite often i&amp;rsquo;m writing code that compares one value against a range of other values. Most implementations compare the value against the boundaries (smallest and largest in the collection of other values). Having written this sort of code way too much i&amp;rsquo;ve decided to generalize the problem and distill an interface&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; IRange&amp;lt;T&amp;gt;
{
	T Begin { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }
	T End { &lt;span style=&#34;color:#66d9ef&#34;&gt;get&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;set&lt;/span&gt;; }
	&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; Includes(T t);
	&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; Includes(IRange&amp;lt;T&amp;gt; range);
	&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; Overlaps(IRange&amp;lt;T&amp;gt; range);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Offcourse, i&amp;rsquo;ve also written implementation. Feel free to download &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/IRange.txt&#34;&gt;IRange.txt&lt;/a&gt;, &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/Range.txt&#34;&gt;Range.txt&lt;/a&gt; and &lt;a href=&#34;http://www.timvw.be/wp-content/code/csharp/RangeTester.txt&#34;&gt;RangeTester.txt&lt;/a&gt;&lt;/p&gt;

        
      </description>
    </item>
    
  </channel>
</rss>
