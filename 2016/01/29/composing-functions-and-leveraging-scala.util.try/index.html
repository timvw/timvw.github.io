<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Composing functions and leveraging scala.util.Try - Tim Van Wassenhove</title><meta name="viewport" content="width=device-width, initial-scale=1">
	
  <meta itemprop="name" content="Composing functions and leveraging scala.util.Try">
  <meta itemprop="description" content="Last couple of days I have been hacking around trying to find a cute way to express the intent of my code. Typically it involves parsing some input, validating whatever rules that are in charge and persisting some values. In scala one can compose such a function by using the andThen method. Here is a concrete example:
def id(x: String) = x def parseInput = id _ def validate = id _ def persist = id _ def usecase1 = parseInput andThen validate andThen persist Inspired by the excellent series on Railway Oriented Programming series by Scott Wlaschin I wanted to take advange of scala.util.Try to remove try/catch clutter from my code. With a little helper function I can now compose my usecase as following:">
  <meta itemprop="datePublished" content="2016-01-29T00:00:00+00:00">
  <meta itemprop="dateModified" content="2021-01-04T22:47:36+01:00">
  <meta itemprop="wordCount" content="230">
  <meta itemprop="keywords" content="FSharp,Railway Oriented Programming,Scala"><meta property="og:url" content="https://timvw.be/2016/01/29/composing-functions-and-leveraging-scala.util.try/">
  <meta property="og:site_name" content="Tim Van Wassenhove">
  <meta property="og:title" content="Composing functions and leveraging scala.util.Try">
  <meta property="og:description" content="Last couple of days I have been hacking around trying to find a cute way to express the intent of my code. Typically it involves parsing some input, validating whatever rules that are in charge and persisting some values. In scala one can compose such a function by using the andThen method. Here is a concrete example:
def id(x: String) = x def parseInput = id _ def validate = id _ def persist = id _ def usecase1 = parseInput andThen validate andThen persist Inspired by the excellent series on Railway Oriented Programming series by Scott Wlaschin I wanted to take advange of scala.util.Try to remove try/catch clutter from my code. With a little helper function I can now compose my usecase as following:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2016-01-29T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-01-04T22:47:36+01:00">
    <meta property="article:tag" content="FSharp">
    <meta property="article:tag" content="Railway Oriented Programming">
    <meta property="article:tag" content="Scala">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Composing functions and leveraging scala.util.Try">
  <meta name="twitter:description" content="Last couple of days I have been hacking around trying to find a cute way to express the intent of my code. Typically it involves parsing some input, validating whatever rules that are in charge and persisting some values. In scala one can compose such a function by using the andThen method. Here is a concrete example:
def id(x: String) = x def parseInput = id _ def validate = id _ def persist = id _ def usecase1 = parseInput andThen validate andThen persist Inspired by the excellent series on Railway Oriented Programming series by Scott Wlaschin I wanted to take advange of scala.util.Try to remove try/catch clutter from my code. With a little helper function I can now compose my usecase as following:">
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://timvw.be/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://timvw.be/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://timvw.be/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://timvw.be/js/main.js"></script>
	<link href="https://github.com/timvw" rel="me">
    <link href="https://timvw.be/" rel="me">
    <link href="https://fosstodon.org/@timvw" rel="me">
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="https://timvw.be/">Tim Van Wassenhove</a></h1>
	<div class="site-description"><p>Passionate geek, interested in Technology. Proud father of two</p><nav class="nav social">
			<ul class="flat"><li><a href="https://twitter.com/timvw" title="Twitter"><i data-feather="twitter"></i></a></li><li><a href="https://github.com/timvw" title="Github"><i data-feather="github"></i></a></li><li><a href="https://www.linkedin.com/in/timvanwassenhove" title="Linkedin"><i data-feather="linkedin"></i></a></li><li><a href="https://timvw.be/feed.xml" title="RSS"><i data-feather="rss"></i></a></li><li><a rel="me" href="https://fosstodon.org/@timvw" class="masto-link" ></a></li>
			</ul>
		
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="../../../../">Home</a>
			</li>
			
			<li>
				<a href="../../../../posts">All posts</a>
			</li>
			
			<li>
				<a href="../../../../tags">Tags</a>
			</li>
			
			<li>
				<a href="../../../../about/">About Me</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">29</span>
							<span class="rest">Jan 2016</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Composing functions and leveraging scala.util.Try</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Last couple of days I have been hacking around trying to find a cute way to express the intent of my code. Typically it involves parsing some input, validating whatever rules that are in charge and persisting some values. In scala one can compose such a function by using the <a href="http://www.scala-lang.org/api/2.11.x/index.html#scala.Function1">andThen</a> method. Here is a concrete example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#cf222e">def</span> id<span style="color:#0550ae">(</span>x<span style="color:#cf222e">:</span> <span style="color:#cf222e">String</span><span style="color:#0550ae">)</span> <span style="color:#cf222e">=</span> x  
</span></span><span style="display:flex;"><span><span style="color:#cf222e">def</span> parseInput <span style="color:#cf222e">=</span> id <span style="color:#cf222e">_</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">def</span> validate <span style="color:#cf222e">=</span> id <span style="color:#cf222e">_</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">def</span> persist <span style="color:#cf222e">=</span> id <span style="color:#cf222e">_</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">def</span> usecase1 <span style="color:#cf222e">=</span> parseInput andThen validate andThen persist
</span></span></code></pre></div><p>Inspired by the excellent series on <a href="http://fsharpforfunandprofit.com/posts/recipe-part2/">Railway Oriented Programming</a> series by <a href="@ScottWlaschin">Scott Wlaschin</a> I wanted to take advange of <a href="http://www.scala-lang.org/files/archive/api/current/index.html#scala.util.Try">scala.util.Try</a> to remove try/catch clutter from my code. With a little helper function I can now compose my usecase as following:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#cf222e">def</span> makeTry<span style="color:#0550ae">[</span><span style="color:#cf222e">TIn</span>, <span style="color:#cf222e">TOut</span><span style="color:#0550ae">](</span>fn<span style="color:#cf222e">:</span> <span style="color:#cf222e">TIn</span> <span style="color:#0550ae">=&gt;</span> <span style="color:#1f2328">TOut</span><span style="color:#0550ae">)</span> <span style="color:#cf222e">=</span> <span style="color:#0550ae">(</span>x<span style="color:#cf222e">:</span> <span style="color:#cf222e">TIn</span><span style="color:#0550ae">)</span> <span style="color:#cf222e">=&gt;</span> <span style="color:#1f2328">Try</span><span style="color:#0550ae">(</span>fn<span style="color:#0550ae">(</span>x<span style="color:#0550ae">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">def</span> usecase <span style="color:#cf222e">=</span>
</span></span><span style="display:flex;"><span>	makeTry<span style="color:#0550ae">(</span>parseInput andThen validate andThen persist<span style="color:#0550ae">)</span> andThen
</span></span><span style="display:flex;"><span>	processErrors andThen
</span></span><span style="display:flex;"><span>	proceedOrRetry
</span></span></code></pre></div><p>Instead of composing functions I could have also written code as a chain of values that are transformed by subsequent functions as following (Very much fsharp like):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">Pipe</span><span style="color:#0550ae">[</span><span style="color:#cf222e">T</span><span style="color:#0550ae">](</span><span style="color:#cf222e">val</span> x<span style="color:#cf222e">:</span> <span style="color:#cf222e">T</span><span style="color:#0550ae">)</span> <span style="color:#0550ae">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#cf222e">def</span> <span style="color:#0550ae">|&gt;</span> <span style="color:#0550ae">[</span><span style="color:#cf222e">U</span><span style="color:#0550ae">](</span>f<span style="color:#cf222e">:</span> <span style="color:#cf222e">T</span> <span style="color:#0550ae">=&gt;</span> U<span style="color:#0550ae">)</span> <span style="color:#cf222e">=</span> f<span style="color:#0550ae">(</span>x<span style="color:#0550ae">)</span>
</span></span><span style="display:flex;"><span><span style="color:#0550ae">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">implicit</span> <span style="color:#cf222e">def</span> toPipe<span style="color:#0550ae">[</span><span style="color:#cf222e">T</span><span style="color:#0550ae">](</span>x<span style="color:#cf222e">:</span> <span style="color:#cf222e">T</span><span style="color:#0550ae">)</span> <span style="color:#cf222e">=</span> <span style="color:#cf222e">new</span> <span style="color:#1f2328">Pipe</span><span style="color:#0550ae">(</span>x<span style="color:#0550ae">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">def</span> usecase<span style="color:#0550ae">(</span>x<span style="color:#cf222e">:</span> <span style="color:#cf222e">String</span><span style="color:#0550ae">)</span> <span style="color:#cf222e">=</span> 
</span></span><span style="display:flex;"><span>	<span style="color:#1f2328">Try</span><span style="color:#0550ae">(</span>x <span style="color:#0550ae">|&gt;</span> parseInput <span style="color:#0550ae">|&gt;</span> validate <span style="color:#0550ae">|&gt;</span> persist<span style="color:#0550ae">)</span> <span style="color:#0550ae">|&gt;</span>
</span></span><span style="display:flex;"><span>	processErrors <span style="color:#0550ae">|&gt;</span>
</span></span><span style="display:flex;"><span>	proceedOrRetry
</span></span></code></pre></div><p>As you can see, with scala there is more than one way to express something in an elegant way!</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="../../../../tags/fsharp">FSharp</a></li>
							
							<li><a href="../../../../tags/railway-oriented-programming">railway oriented programming</a></li>
							
							<li><a href="../../../../tags/scala">scala</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2025  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-9DP4SV12YW"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-9DP4SV12YW');
        }
      </script><script>feather.replace()</script>
</body>
</html>
