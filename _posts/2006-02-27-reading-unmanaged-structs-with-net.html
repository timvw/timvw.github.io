---
layout: post
status: publish
published: true
title: Reading unmanaged structs with .NET
author:
  display_name: timvw
  login: admin
  email: tim@timvw.be
  url: http://timvw.myopenid.com/
author_login: admin
author_email: tim@timvw.be
author_url: http://timvw.myopenid.com/
wordpress_id: 37
wordpress_url: http://www.timvw.be/reading-unmanaged-structs-with-net/
date: '2006-02-27 02:50:41 +0100'
date_gmt: '2006-02-27 00:50:41 +0100'
categories: []
tags:
- C++
comments:
- id: 253117
  author: clear itunes library
  author_email: janeenricci@yahoo.com
  author_url: http://www.itunes-cleaner.com
  date: '2013-09-15 03:24:29 +0200'
  date_gmt: '2013-09-15 02:24:29 +0200'
  content: "I have been browsing online more than 4 hours today, yet I never found
    any interesting article like yours.\r\nIt is pretty worth enough for me. Personally,
    if all web owners and bloggers made good \r\ncontent as you did, the net will
    be much more useful than ever before.|\r\nI could not resist commenting. Perfectly
    written!|\r\nI'll right away seize your rss feed as I can't find your e-mail subscription
    link or \r\nnewsletter service. Do you've any? Please allow me recognize \r\nso
    that I may just subscribe. Thanks.|\r\nIt is the best time to make some plans
    for the future and it's time to be happy.\r\nI have read this post and if I could
    I want to suggest \r\nyou few interesting things or suggestions. Perhaps you can
    write next articles referring to this \r\narticle. I want to read even more things
    about it!|\r\nIt is perfect time to make a few plans for the future and it is
    \r\ntime to be happy. I have read this submit and if I could I \r\ndesire to counsel
    you few fascinating issues or advice.\r\nPerhaps you can write subsequent articles
    relating to this article.\r\nI desire to learn more issues approximately it!|\r\nI've
    been surfing on-line more than three hours these days, yet I never discovered
    any interesting article like yours.\r\nIt is pretty price sufficient for me. In
    my opinion, if all web owners and bloggers \r\nmade excellent content as you did,
    the net can be a lot more helpful than ever before.|\r\nAhaa, its nice conversation
    on the topic of \r\nthis piece of writing here at this website, I have read all
    that, so at this time me also commenting at this place.|\r\nI am sure this article
    has touched all the internet people, \r\nits really really nice article on building
    up new \r\nblog.|\r\nWow, this article is fastidious, my younger sister is analyzing
    these things, so \r\nI am going to let know her.|\r\nbookmarked!!, I love your
    site!|\r\nWay cool! Some extremely valid points! I appreciate you penning this
    post and also \r\nthe rest of the site is extremely good.|\r\nHi, I do think this
    is a great website. I stumbledupon it \r\n;) I'm going to revisit once again since
    i have saved as a favorite it.\r\nMoney and freedom is the best way to change,
    may you be rich and continue to guide \r\nothers.|\r\nWoah! I'm really enjoying
    the template&#47;theme of this website.\r\nIt's simple, yet effective. A lot of
    times it's challenging to get that \"perfect balance\" between usability and visual
    appearance.\r\nI must say that you've done a superb job with this.\r\n\r\nAlso,
    the blog loads very quick for me on Safari. Outstanding Blog!|\r\nThese are genuinely
    impressive ideas in concerning blogging.\r\nYou have touched some nice things
    here. Any way keep up \r\nwrinting.|\r\nI enjoy what you guys tend to be up too.
    This sort of clever work and \r\nexposure! Keep up the good works guys I've  you
    guys to my blogroll.|\r\nHey there! Someone in my Facebook group shared this website
    with \r\nus so I came to give it a look. I'm definitely \r\nloving the information.
    I'm book-marking and will be tweeting this to \r\nmy followers! Outstanding blog
    and outstanding design.|\r\nI love what you guys tend to be up too. Such clever
    work and reporting!\r\n\r\nKeep up the fantastic works guys I've included you
    guys to my personal blogroll.|\r\nHi there would you mind stating which blog platform
    you're working with?\r\nI'm looking to start my own blog in the near future but
    I'm having a hard time deciding \r\nbetween BlogEngine&#47;Wordpress&#47;B2evolution
    and Drupal.\r\nThe reason I ask is because your design seems different then most
    blogs and I'm looking for something \r\ncompletely unique.                  P.S
    My apologies for being off-topic but I \r\nhad to ask!|\r\nHey there would you
    mind letting me know which \r\nweb host you're utilizing? I've loaded your blog
    in 3 \r\ncompletely different browsers and I must say this blog loads \r\na lot
    faster then most. Can you recommend a good internet hosting provider at a honest
    \r\nprice? Thanks, I appreciate it!|\r\nI love it when people come together and
    share \r\nthoughts. Great website, continue the good work!|\r\nThank you for the
    good writeup. It in fact was a amusement \r\naccount it. Look advanced to far
    added agreeable from you!\r\nHowever, how can we communicate?|\r\nHello just wanted
    to give you a quick heads up. The words in your content seem to be running off
    the screen in Opera.\r\nI'm not sure if this is a formatting issue or something
    to do with browser compatibility but I \r\nthought I'd post to let you know. The
    style and design look \r\ngreat though! Hope you get the problem resolved soon.\r\nMany
    thanks|\r\nThis is a topic that is near to my heart... Thank you!\r\n\r\nExactly
    where are your contact details though?|\r\nIt's very trouble-free to find out
    any topic on web as compared to books, as I found this article at \r\nthis website.|\r\nDoes
    your site have a contact page? I'm having trouble locating it but, I'd like to
    \r\nsend you an e-mail. I've got some recommendations for your blog you might
    be interested \r\nin hearing. Either way, great website and I look forward to
    \r\nseeing it grow over time.|\r\nHey there! I've been following your site for
    some time now and \r\nfinally got the courage to go ahead and give you a shout
    out from  Lubbock Tx!\r\n\r\nJust wanted to tell you keep up the fantastic work!|\r\nGreetings
    from Idaho! I'm bored to death at work so I decided to check out your blog on
    my iphone \r\nduring lunch break. I really like the information you provide here
    and can't wait \r\nto take a look when I get home. I'm amazed at how fast your
    blog loaded \r\non my mobile .. I'm not even using WIFI, just 3G .. Anyways, superb
    blog!|\r\nIts such as you read my mind! You seem to understand a lot approximately
    this, like you wrote the e book in it or something.\r\nI believe that you just
    can do with a few % to power the message home a \r\nbit, but other than that,
    that is wonderful blog. An excellent \r\nread. I'll certainly be back.|\r\nI visited
    multiple blogs however the audio quality for audio \r\nsongs current at this web
    page is genuinely excellent.|\r\nHello, i read your blog from time to time and
    \r\ni own a similar one and i was just curious if you get a lot \r\nof spam feedback?
    If so how do you prevent it, any plugin or anything you can suggest?\r\nI get
    so much lately it's driving me crazy so any support is very \r\nmuch appreciated.|\r\nGreetings!
    Very helpful advice within this post!\r\nIt is the little changes that produce
    the most important changes.\r\nThanks a lot for sharing!|\r\nI seriously love
    your blog.. Pleasant colors &amp; theme.\r\nDid you create this site yourself?
    Please reply \r\nback as I'm looking to create my own personal site and want \r\nto
    know where you got this from or what the theme is called.\r\nThank you!|\r\nHello
    there! This article could not be written much better!\r\nLooking through this
    article reminds me of my previous roommate!\r\nHe always kept preaching about
    this. I will forward \r\nthis article to him. Fairly certain he will have \r\na
    great read. Thank you for sharing!|\r\nWow! This blog looks exactly like my old
    one!\r\nIt's on a entirely different topic but it has \r\npretty much the same
    page layout and design. Outstanding choice of colors!|\r\nThere's definately a
    great deal to learn about this subject.\r\nI love all of the points you made.|\r\nYou
    made some really good points there. I looked on the \r\ninternet to find out more
    about the issue and found most people will go along with your views on this web
    site.|\r\nHi, I read your blog on a regular basis. Your writing style is awesome,
    keep doing what you're doing!|\r\nI just couldn't depart your web site prior to
    suggesting that I really loved the usual info an individual supply for your guests?\r\n\r\nIs
    gonna be back ceaselessly in order to investigate cross-check new posts|\r\nI
    need to to thank you for this wonderful read!! I definitely enjoyed every bit
    \r\nof it. I've got you book marked to check out new things you post&hellip;|\r\nWhat's
    up, just wanted to mention, I enjoyed this blog post.\r\nIt was helpful. Keep
    on posting!|\r\nI drop a comment when I especially enjoy a article on \r\na website
    or if I have something to valuable to contribute to the discussion.\r\nUsually
    it is a result of the sincerness displayed in the article I browsed.\r\nAnd on
    this article Reading unmanaged structs with .NET | Tim Van Wassenhove.\r\nI was
    actually excited enough to drop a comment ;-) I actually do have some questions
    for you if \r\nit's allright. Could it be simply me or do a few of these comments
    appear as if they \r\nare coming from brain dead folks? :-P And, if \r\nyou are
    posting at other sites, I would like to keep up with you.\r\nWould you make a
    list all of all your social pages like your linkedin profile, Facebook page or
    twitter feed?|\r\nHi there, I enjoy reading all of your post.\r\nI wanted to write
    a little comment to support you.|\r\nI always spent my half an hour to read this
    blog's \r\ncontent daily along with a cup of coffee.|\r\nI always emailed this
    webpage post page to all my contacts,\r\nbecause if like to read it next my friends
    will \r\ntoo.|\r\nMy coder is trying to convince me to move to .net from \r\nPHP.
    I have always disliked the idea because of the costs.\r\nBut he's tryiong none
    the less. I've been using Movable-type \r\non several websites for about a year
    and am worried about switching to another platform.\r\nI have heard fantastic
    things about blogengine.net.\r\nIs there a way I can transfer all my wordpress
    posts \r\ninto it? Any kind of help would be really appreciated!|\r\nHi! I could
    have sworn I've been to your blog before \r\nbut after looking at a few of the
    articles I realized it's new to me.\r\nNonetheless, I'm definitely pleased I discovered
    it \r\nand I'll be bookmarking it and checking back often!|\r\nTerrific article!
    This is the type of info that should be shared around the internet.\r\n\r\nShame
    on Google for now not positioning this submit higher!\r\nCome on over and discuss
    with my web site . Thanks =)|\r\nHeya i'm for the first time here. I came across
    this board and I find It \r\nreally useful &amp; it helped me out a lot. I hope
    to give something back and aid others like you aided me.|\r\nGreetings, I do think
    your website may be having internet browser compatibility problems.\r\n\r\nWhenever
    I take a look at your site in Safari, it looks fine but when opening in \r\nInternet
    Explorer, it's got some overlapping issues.\r\nI simply wanted to provide you
    with a quick heads up!\r\n\r\nApart from that, wonderful website!|\r\nSomeone
    essentially help to make significantly articles I'd state.\r\n\r\nThat is the
    first time I frequented your website page and \r\nso far? I amazed with the analysis
    you made to make this particular put up amazing.\r\nFantastic process!|\r\nHeya
    i am for the primary time here. I came across \r\nthis board and I to find It
    really useful &amp; it helped me out a lot.\r\nI hope to provide something back
    and aid others like you helped \r\nme.|\r\nHello! I just wish to give you a huge
    thumbs up for the great info you have got here on this post.\r\nI'll be returning
    to your web site for more soon.|\r\nI always used to read post in news papers
    but now as I am a user of net therefore from now I am using net for articles,
    thanks to web.|\r\nYour method of describing all in this post is really pleasant,
    all be capable of without difficulty understand it, Thanks a lot.|\r\nHello there,
    I discovered your blog by way of Google at the same time as looking for a comparable
    subject, your website came up, it appears to be like good.\r\nI've bookmarked
    it in my google bookmarks.\r\nHello there, just was aware of your blog via Google,
    and found that it's truly informative.\r\nI am going to watch out for brussels.
    I'll be grateful when you proceed this in future.\r\n\r\nLots of people will probably
    be benefited out of your writing.\r\nCheers!|\r\nI am curious to find out what
    blog platform you happen \r\nto be working with? I'm having some small security
    issues with my latest website \r\nand I'd like to find something more secure.
    Do you have any \r\nrecommendations?|\r\nI'm really impressed with your writing
    skills as well as with the layout on your blog.\r\nIs this a paid theme or did
    you modify it yourself?\r\nAnyway keep up the nice quality writing, it is rare
    to \r\nsee a nice blog like this one these days.|\r\nI'm extremely inspired along
    with your writing talents as neatly as with \r\nthe structure on your weblog.
    Is this a paid subject matter or \r\ndid you modify it your self? Either way stay
    up the excellent quality writing, it's rare to see a nice weblog like this one
    nowadays..|\r\nHi, Neat post. There is a problem together with your website in
    web explorer, would check this?\r\nIE still is the marketplace chief and a big
    component of other folks will miss your great writing due to \r\nthis problem.|\r\nI
    am not sure where you're getting your info, but great topic.\r\nI needs to spend
    some time learning much more or understanding more.\r\nThanks for excellent information
    I was looking for this information for my mission.|\r\nHi, i think that i saw
    you visited my site so i \r\ncame to &ldquo;return the favor&rdquo;.I'm attempting
    to find things to improve my website!I suppose its ok to \r\nuse a few of your
    ideas!!\\"
---
<p>Last week i've spend a lot of time studying <a href="http:&#47;&#47;msdn.microsoft.com&#47;library&#47;default.asp?url=&#47;library&#47;en-us&#47;cpref&#47;html&#47;frlrfSystemRuntimeInteropServices.asp">System::Runtime::InteropServices<&#47;a>. It took me a while to figure out how i could read unmanaged structs with .NET <a href="http:&#47;&#47;msdn.microsoft.com&#47;library&#47;default.asp?url=&#47;library&#47;en-us&#47;cpref&#47;html&#47;frlrfsystemio.asp">System::IO<&#47;a>. Here is a bit of sample code (Should be obvious enough to write a template or generic class for all sorts of structs, just like i did at the office)<&#47;p><br />
[code lang="cpp"]<br />
typedef struct {<br />
  char name[9];<br />
  int name;<br />
  double sterr;<br />
} TEST;</p>
<p>FileStream ^f = gcnew FileStream("C:\\TEST.DAT", FileMode::Open, FileAccess::ReadWrite);<br />
BinaryReader ^r = gcnew BinaryReader(f);<br />
array<byte> ^buf = r->ReadBytes(sizeof(TEST));<br />
TEST test;<br />
Marshal::Copy(buf, 0, (IntPtr) &test, sizeof(TEST));<br />
[&#47;code]</p>
